function hideentry(){$("#handle_form").hide(400),$("body").css("background"," #7FDBFF ")}function openModal(){document.getElementById("modal").style.display="block",document.getElementById("fade").style.display="block"}function closeModal(){document.getElementById("modal").style.display="none",document.getElementById("fade").style.display="none"}function build_main(){const e={hank:["Hank Hill","https://cdn.jsdelivr.net/gh/abhidya/Koth-character-identifier/static/images/big_hank.gif"],peggy:["Peggy Hill","https://cdn.jsdelivr.net/gh/abhidya/Koth-character-identifier/static/images/big_peggy.png"],dale:["Dale Gribble","https://cdn.jsdelivr.net/gh/abhidya/Koth-character-identifier/static/images/big_dale.gif"],bobby:["Bobby Hill","https://cdn.jsdelivr.net/gh/abhidya/Koth-character-identifier/static/images/big_bobby.gif"]},t=getKeysWithHighestValue(character_values,1)[0],a=e[t][0],o=e[t][1];$("#proclamation").text("You are "+a),$("#biggie_char").attr("src",o)}function getKeysWithHighestValue(e,t){var a=Object.keys(e);return a.sort(function(t,a){return e[a]-e[t]}),console.log(a),a.slice(0,t)}var config={},character_values={},mostBobby="",mostHank="",mostDale="",mostPeggy="",mostBobbyConf=-99,mostHankConf=-99,mostDaleConf=-99,mostPeggyConf=-99,leastBobby="",leastHank="",leastDale="",leastPeggy="",leastBobbyConf=99,leastHankConf=99,leastDaleConf=99,leastPeggyConf=99;function findmaxmin(e,t,a){switch(t){case"hank":a>mostHankConf&&(mostHankConf=a,mostHank=e),a<leastHankConf&&(leastHankConf=a,leastHank=e);break;case"dale":a>mostDaleConf&&(mostDaleConf=a,mostDale=e),a<leastDaleConf&&(leastDaleConf=a,leastDale=e);break;case"peggy":a>mostPeggyConf&&(mostPeggyConf=a,mostPeggy=e),a<leastPeggyConf&&(leastPeggyConf=a,leastPeggy=e);break;case"bobby":a>mostBobbyConf&&(mostBobbyConf=a,mostBobby=e),a<leastBobbyConf&&(leastBobbyConf=a,leastBobby=e)}}function buildtweettable(e,t){var a=document.getElementById("tableoftweets"),o=a.insertRow(a.rows.length);o.insertCell(0).innerHTML=e;var n=o.insertCell(1),s=o.insertCell(2),l=o.insertCell(3),i=o.insertCell(4),r=0;for(r=0;r<t.length;r++){var c=t[r][0],g=t[r][1];switch(g=g.toFixed(2),c){case"hank":n.innerText=g;break;case"dale":i.innerText=g;break;case"peggy":s.innerText=g;break;case"bobby":l.innerText=g}}}function buildmaxmin(){$("#Most_Bobby").text(mostBobby),$("#Most_Bobby_conf").text("Confidence Level :   "+mostBobbyConf.toFixed(2)),$("#Most_Dale").text(mostDale),$("#Most_Dale_conf").text("Confidence Level :   "+mostDaleConf.toFixed(2)),$("#Most_Hank").text(mostHank),$("#Most_Hank_conf").text("Confidence Level :   "+mostHankConf.toFixed(2)),$("#Most_Peggy").text(mostPeggy),$("#Most_Peggy_conf").text("Confidence Level :   "+mostPeggyConf.toFixed(2)),$("#least_Bobby_conf").text("Confidence Level :   "+leastBobbyConf.toFixed(2)),$("#least_Dale").text(leastDale),$("#least_Dale_conf").text("Confidence Level :   "+leastDaleConf.toFixed(2)),$("#least_Hank").text(leastHank),$("#least_Hank_conf").text("Confidence Level :   "+leastHankConf.toFixed(2)),$("#least_Peggy").text(leastPeggy),$("#least_Peggy_conf").text("Confidence Level "+leastPeggyConf.toFixed(2))}var ctx=document.getElementById("myChart").getContext("2d"),response={},frm=$("#handle_form");frm.submit(function(e){e.preventDefault(),$.ajax({type:frm.attr("method"),url:frm.attr("action"),data:frm.serialize(),beforeSend:function(){openModal()},success:function(e){var t;for(console.log("Submission was successful."),console.log(e),e=JSON.parse(e),response=e,character_values={},t=0;t<e.length;t++)Object.keys(e[t]).forEach(function(a){console.log(a);for(var o=e[t][a],n=-2,s="",l=0;l<o.length;l++){var i=o[l][0],r=o[l][1];-2==n?(n=r,s=i):n<r&&(n=r,s=i),findmaxmin(a,i,r),console.log(o[l][0],o[l][1])}character_values[s]=(character_values[s]||0)+1,character_values[s]+=parseFloat(1)});config={type:"pie",data:{datasets:[{data:[character_values.hank,character_values.dale,character_values.peggy,character_values.bobby],backgroundColor:["#F7464A","#46BFBD","#FDB45C","#4D5360"],label:"Dataset 1"}],labels:["Hank","Dale","Peggy","Bobby"]},options:{responsive:!0,responsiveAnimationDuration:2,maintainAspectRatio:!1,legend:{display:!0,position:"right",align:"middle"},title:{display:!1},plugins:{labels:{render:"image"}},animation:{animateScale:!0,animateRotate:!0}}}},complete:function(e){closeModal(),$("#visualizations").css("display","block"),build_main(),new Chart(ctx,config),buildmaxmin();var t=0;for(t=0;t<response.length;t++)Object.keys(response[t]).forEach(function(e){buildtweettable(e,response[t][e])})},error:function(e){console.log("An error occurred."),console.log(e),alert("Twitter Search Error: Is the username correct? Check logs for more info")}})});